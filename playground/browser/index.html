<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CMP Playground for browser bundle</title>
    <script type="text/javascript">
      !function (t) { var e = {}; function n(r) { if (e[r]) return e[r].exports; var o = e[r] = { i: r, l: !1, exports: {} }; return t[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports } n.m = t, n.c = e, n.d = function (t, e, r) { n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: r }) }, n.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, n.t = function (t, e) { if (1 & e && (t = n(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var r = Object.create(null); if (n.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var o in t) n.d(r, o, function (e) { return t[e] }.bind(null, o)); return r }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(e, "a", e), e }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, n.p = "", n(n.s = 3) }([function (t, e) { t.exports = function (t) { return "object" == typeof t ? null !== t : "function" == typeof t } }, function (t, e, n) { t.exports = !n(2)(function () { return 7 != Object.defineProperty({}, "a", { get: function () { return 7 } }).a }) }, function (t, e) { t.exports = function (t) { try { return !!t() } catch (t) { return !0 } } }, function (t, e, n) { "use strict"; n.r(e); n(4); !function () { if ("function" != typeof window.__tcfapi) { var t, e = [], n = window, r = n.document; !n.__tcfapi && function t() { var e = !!n.frames.__tcfapiLocator; if (!e) if (r.body) { var o = r.createElement("iframe"); o.style.cssText = "display:none", o.name = "__tcfapiLocator", r.body.appendChild(o) } else setTimeout(t, 5); return !e }() && (n.__tcfapi = function () { for (var n = arguments.length, r = new Array(n), o = 0; o < n; o++)r[o] = arguments[o]; if (!r.length) return e; if ("setGdprApplies" === r[0]) r.length > 3 && 2 === parseInt(r[1], 10) && "boolean" == typeof r[3] && (t = r[3], "function" == typeof r[2] && r[2]("set", !0)); else if ("ping" === r[0]) { var i = { gdprApplies: t, cmpLoaded: !1, apiVersion: "2.0" }; "function" == typeof r[2] && r[2](i, !0) } else e.push(r) }, n.addEventListener("message", function (t) { var e = "string" == typeof t.data, r = {}; try { r = e ? JSON.parse(t.data) : t.data } catch (t) { } var o = r.__tcfapiCall; o && n.__tcfapi(o.command, o.parameter, o.version, function (n, r) { var i = { __tcfapiReturn: { returnValue: n, success: r, callId: o.callId } }; e && (i = JSON.stringify(i)), t.source.postMessage(i, "*") }) }, !1)) } }() }, function (t, e, n) { var r = n(5).f, o = Function.prototype, i = /^\s*function ([^ (]*)/; "name" in o || n(1) && r(o, "name", { configurable: !0, get: function () { try { return ("" + this).match(i)[1] } catch (t) { return "" } } }) }, function (t, e, n) { var r = n(6), o = n(7), i = n(10), f = Object.defineProperty; e.f = n(1) ? Object.defineProperty : function (t, e, n) { if (r(t), e = i(e, !0), r(n), o) try { return f(t, e, n) } catch (t) { } if ("get" in n || "set" in n) throw TypeError("Accessors not supported!"); return "value" in n && (t[e] = n.value), t } }, function (t, e, n) { var r = n(0); t.exports = function (t) { if (!r(t)) throw TypeError(t + " is not an object!"); return t } }, function (t, e, n) { t.exports = !n(1) && !n(2)(function () { return 7 != Object.defineProperty(n(8)("div"), "a", { get: function () { return 7 } }).a }) }, function (t, e, n) { var r = n(0), o = n(9).document, i = r(o) && r(o.createElement); t.exports = function (t) { return i ? o.createElement(t) : {} } }, function (t, e) { var n = t.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")(); "number" == typeof __g && (__g = n) }, function (t, e, n) { var r = n(0); t.exports = function (t, e) { if (!r(t)) return t; var n, o; if (e && "function" == typeof (n = t.toString) && !r(o = n.call(t))) return o; if ("function" == typeof (n = t.valueOf) && !r(o = n.call(t))) return o; if (!e && "function" == typeof (n = t.toString) && !r(o = n.call(t))) return o; throw TypeError("Can't convert object to primitive value") } }]);
    </script>
    <script>
      window._sp_ = {
        config: {
          mmsDomain: "https://message75.sp-prod.net",
          accountId: 75,
          propertyId: 6867,
          wrapperAPIOrigin: "https://wrapper-api.sp-prod.net/tcfv2",
        }
      }
    </script>
    <script src="https://gdpr-tcfv2.sp-prod.net/wrapperMessagingWithoutDetection.js"></script>
    <script src="./bundles/tcf-v2.js"></script>
    <script src="./bundles/callbacks.js"></script>
    <link rel="stylesheet" href="../assets/fonts.css">
    <link rel="stylesheet" href="./bundles/embed-placeholder/EmbedPlaceholderFacebook.css">
    <style>
        body {
            font-family: Gotham;
        }

        .embed-placeholder__showcase {
            width: 100vw;
            display: flex;
            align-items: center;
            flex-direction: column;
        }

        .embed-placeholder__section {
            margin-bottom: 20px;
        }

        .consent-status__container {
            margin-top: 10px;
        }
    </style>
</head>
<body>
<div class="embed-placeholder__showcase">
    <section class="embed-placeholder__section">
        <h2>Allgemeiner Embed Platzhalter</h2>
        <div id="generic"></div>
    </section>
    <section class="embed-placeholder__section">
        <h2>Facebook Embed Platzhalter</h2>
        <div id="facebook"></div>
        <div class="consent-status__container" data-vendor-id="5e716fc09a0b5040d575080f">Consent Status: <span class="consent-status__value">Unbekannt</span></div>
    </section>
    <section class="embed-placeholder__section">
        <h2>Instagram Embed Platzhalter</h2>
        <div id="instagram"></div>
        <div class="consent-status__container" data-vendor-id="5e717c8e69966540e4554f05">Consent Status: <span class="consent-status__value">Unbekannt</span></div>
    </section>
    <section class="embed-placeholder__section">
        <h2>Twitter Embed Platzhalter</h2>
        <div id="twitter"></div>
        <div class="consent-status__container" data-vendor-id="5e71760b69966540e4554f01">Consent Status: <span class="consent-status__value">Unbekannt</span></div>
    </section>
    <section class="embed-placeholder__section">
        <h2>Youtube Embed Platzhalter</h2>
        <div id="youtube"></div>
        <!-- <div class="consent-status__container" data-vendor-id="5e716fc09a0b5040d575080f">Consent Status: <span class="consent-status__value">Unbekannt</span></div>-->
    </section>
</div>

<script>
  const loadPlaceholderSnippets = async () => {
    const containers = [
      {name: 'EmbedPlaceholder', targetId: 'generic'},
      {name: 'EmbedPlaceholderFacebook', targetId: 'facebook'},
      {name: 'EmbedPlaceholderInstagram', targetId: 'instagram'},
      {name: 'EmbedPlaceholderTwitter', targetId: 'twitter'},
      {name: 'EmbedPlaceholderYoutube', targetId: 'youtube'},
    ];

    await Promise.all(
      containers.map(
        ({ name, targetId }) => fetch(`./bundles/embed-placeholder/${name}.html`)
          .then(response => response.text())
          .then(html => (document.getElementById(targetId).innerHTML = html))
      )
    );

    document
      .querySelectorAll('.embed-placeholder__button')
      .forEach(
        button => button.addEventListener(
          'click',
          () => RedSourcepointTCFV2.loadPrivacyManagerModal('103346')
        )
      );

    RedSourcepointTCFV2.getCustomVendorConsents().then(result => console.log(result));
    RedSourcepointCallbacks.onPrivacyManagerAction(() => console.log('onPrivacyManagerAction'));
  };

  loadPlaceholderSnippets();
</script>
</body>
</html>
